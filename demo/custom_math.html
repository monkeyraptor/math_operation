<html>
    <head>
        <META CHARSET="UTF-8">
        <META NAME="VIEWPORT" CONTENT="WIDTH=DEVICE-WIDTH, INITIAL-SCALE=1.0">  
        <LINK HREF="custom_math.css" REL="STYLESHEET">
    </head>

    <body>
        <h1>Custom Math JS Demo</h1>
        <div class="divider">
            <input disabled="1" id="input" class="input" type="text" placeholder="Your input">
            <button disabled="1" id="run_btn" class="input">Run</button>
        </div>
        <div class="divider">
          <div id="explanation" class="well">
              Explanation
          </div>
        </div>
        <div class="divider">
            <input disabled="1" id="output" class="input" type="text" placeholder="Output" readonly="1">
        </div>
        <div class="divider">            
            <div class="well">
                <ol class="list">
                    <li>Factorial:<br><mark>math.factorial(n)</mark></li>
                    <li>Combination:<br><mark>math.combination(n, k)</mark></li>
                    <li>Permutation:<br><mark>math.permutation(n, k)</mark></li>
                    <li>Add Comma:<br><mark>math.addcomma(integer)</mark></li>
                    <li>Fibonacci:<br><mark>math.fibonacci(1st_num, 2nd_num, how_many)</mark></li>
                    <li>Get Factors:<br><mark>math.factorof(integer, flag)</mark></li>
                    <li>Prime Check:<br><mark>math.prime_check(integer)</mark></li>
                    <li>Generating Primes:<br><mark>math.generate_prime(start, how_many)</mark></li>
                    <li>Pascal's Triangle:<br><mark>math.pascal_triangle(how_many, flag)</mark></li>
                    <li>Least Common Multiple:<br><mark>math.lcm(num_1, num_2[, num_3])</mark></li>
                    <li>Greatest Common Factor:<br><mark>math.gcf(num_1, num_2[, num_3])</mark></li>
                </ol>
                <hr>
                    Project at GitHub: <a class="green" title="new window" href="https://github.com/monkeyraptor/math_operation" target="_blank">github.com/monkeyraptor/math_operation</a>
            </div>
        </div>
        <script>
            function my_math_handler() {
                "use strict";
                var d = document,
                    keyword = {
                    
                        //[1] math.factorial(n)
                        "math.factorial": [math.factorial,

                                "This needs one argument<hr><mark>math.factorial(n)</mark><hr>Example:<br><br><mark>math.factorial(5)</mark>",
                                  
                                1],
                                  
                        //[2] math.combination(n, k)
                        "math.combination": [math.combination, 

                                "This needs two arguments<hr><mark>math.combination(n, k)</mark><hr>Example:<br><br><mark>math.combination(7, 2)</mark>",
                                    
                                2],
                                    
                        //[3] math.permutation(n, k)                      
                        "math.permutation": [math.permutation,

                                "This needs two arguments<hr><mark>math.permutation(n, k)</mark><hr>Example:<br><br><mark>math.permutation(10, 3)</mark>", 
                                
                                2],
                                    
                        //[4] math.addcomma(a)                      
                        "math.addcomma": [math.addcomma, 

                                "This needs one argument<hr><mark>math.addcomma(large_integer)</mark><hr>Example:<br><br><mark>math.addcomma(25000)</mark>",  

                                1],

                        //[5] math.fibonacci(1st_number, 2nd_number, how_many)  
                        "math.fibonacci": [math.fibonacci, 

                                "This needs three arguments<hr><mark>math.fibonacci(1st_number, 2nd_number, how_many)</mark><hr>Example:<br><br><mark>math.fibonacci(1, 1, 3)</mark>", 

                                3],
                                  
                        //[6] math.factorof(positive_integer, flag)                  
                        "math.factorof": [math.factorof, 

                                "This needs two arguments<hr><mark>math.factorof(positive_integer, flag)</mark><br><br><mark>flag</mark> can be 0 or 1<hr>Example:<br><br><mark>math.factorof(15, 1)</mark>",

                                2],
                                  
                        //[7] math.prime_check(positive_integer)
                        "math.prime_check": [math.prime_check, 

                                "This needs one argument<hr><mark>math.prime_check(positive_integer)</mark><hr>Example:<br><br><mark>math.prime_check(20)</mark>", 

                                1],      
                                  
                        //[8] math.generate_prime(start_num, how_many)
                        "math.generate_prime": [math.generate_prime,

                                "This needs two arguments<hr><mark>math.generate_prime(start_num, how_many)</mark><hr>Example:<br><br><mark>math.generate_prime(3, 7)</mark>", 

                                2],
                                        
                        //[9] math.pascal_triangle(how_many, flag)
                        "math.pascal_triangle": [math.pascal_triangle,

                                "This needs two arguments<hr><mark>math.pascal_triangle(how_many, flag)</mark><hr><mark>flag</mark> <u>0</u> is for getting the particular number sequence line of Pascal's triangle and the <u>1</u> is to show all lines until the given limit<hr> Example:<br><br><mark>math.pascal_triangle(10, 0)</mark>", 

                                2],

                        //[10] math.lcm(how_many, flag)
                        "math.lcm": [math.lcm,

                                "This needs two arguments minimum, max of three<hr><mark>math.lcm(num_1, num_2[, num_3])</mark><hr>Examples:<br><br><mark>math.lcm(10, 8)</mark><br><br><mark>math.lcm(15, 8, 14)</mark>", 

                                "2 or 3"],

                        //[11] math.gcf(how_many, flag)
                        "math.gcf": [math.gcf,

                                "This needs two arguments minimum, max of three<hr><mark>math.gcf(num_1, num_2[, num_3])</mark><hr>Examples:<br><br><mark>math.gcf(10, 28)</mark><br><br><mark>math.gcf(15, 8, 14)</mark>", 

                                "2 or 3"]
                    },
                    run_btn = d.getElementById("run_btn"),
                    input_text = d.getElementById("input"),
                    output_text = d.getElementById("output"),
                    expl = d.getElementById("explanation"),
                    keys = Object.keys(keyword),
                    i,
                    val,
                    key;

                input_text.disabled = 0;
                output_text.disabled = 0;

                function clear(a) {
                    a.value = "";
                }
                
                input_text.oninput = function () {
                    i = 0;
                    do {
                        if (!input_text.value.match(keys[i])) {                        
                            run_btn.disabled = 1;
                            val = "";
                            key = "";
                            expl.innerHTML = "Explanation";
                            clear(output_text);
                        } else {
                            if (!!input_text.value.match(/\((-?(\d,*)\s?)*\)$/g)) {
                                run_btn.disabled = 0;
                            } else {
                                run_btn.disabled = 1;
                            }
                            val = input_text.value;
                            key = keys[i];
                            expl.innerHTML = keyword[keys[i]][1];  
                            break;           
                        }                        
                        i += 1;
                    } while (i < keys.length);
                };
                
                run_btn.onclick = function () {
                    var nums = val.match(/-\d+|\d+/g),
                        result = "ERROR INPUT";
                        
                    if (keyword[key][2] === 1) {
                        if (!!nums && nums.length === keyword[key][2]) {
                            result = keyword[key][0](nums[0]);
                        }                    
                    } else if (keyword[key][2] === 2) {
                        if (!!nums && nums.length === keyword[key][2]) {
                            result = keyword[key][0](nums[0], nums[1]);
                        } 
                    } else if (keyword[key][2] === 3) {
                        if (!!nums && nums.length === keyword[key][2]) {
                            result = keyword[key][0](nums[0], nums[1], nums[2]);
                        }
                    } else if (keyword[key][2] === "2 or 3") {
                        if (!!nums && nums.length === 2) {
                            result = keyword[key][0](nums[0], nums[1]);
                        } else if (!!nums && nums.length === 3) {
                            result = keyword[key][0](nums[0], nums[1], nums[2]);
                        }
                    }
                    output_text.value = result;
                };
            }

            //inject the external script
            (function (d, s, h) {
                "use strict";
                var url = "custom_math_2.js",
                    custom_math = d.createElement(s),
                    flag = 0,
                    head = d.getElementsByTagName(h)[0];
                
                custom_math.src = url;                
                head.appendChild(custom_math);
                function callback() {
                    if (!flag || (!!custom_math.readyState && custom_math.readyState !== "complete")) {
                        my_math_handler();
                        flag = 1;
                    }
                }
                custom_math.onload = callback;
                custom_math.onreadystatechange = callback;
            }(document, "script", "head"));
        </script>
    </body>
</html>
